# TMUX.CONF
# =========

# =======================
# Aesthetic configuration
# =======================
  # ------------
  # Window title
  # ------------
    set-window-option -g automatic-rename on
    set-option -g set-titles on
    set-option -g set-titles-string "#{session_name}:#{window_index}:#{window_name}"
  # ------------------
  # True-color support
  # ------------------
    set -g default-terminal "tmux-256color"
    set -as terminal-overrides ",xterm-256color:RGB"
  # ----------
  # Undercurls
  # ----------
    set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
    set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

# ======================
# Terminal configuration
# ======================
  # -----------------------
  # Clipboard configuration
  # -----------------------
    set -g set-clipboard external
  # -------------------
  # Mouse configuration
  # -------------------
    set -g mouse on
  # --------------------
  # Timing configuration
  # --------------------
    set -sg repeat-time 400
  # ----------
  # xterm keys
  # ----------
    set -g xterm-keys on
  # -------------
  # CSI u support
  # -------------
    set -s extended-keys on

# =========================
# Multiplexor configuration
# =========================
  # --------------------
  # Window configuration
  # --------------------
    # Start window numbering at 1
    set -g base-index 1
    # Start pane numbering at 1
    setw -g pane-base-index 1
    # Renumber windows when a window is closed
    set -g renumber-windows on
  # ----------------------
  # Activity configuration
  # ----------------------
    set -g monitor-activity on
    set -g visual-activity off
    set -g bell-action none
    set -g visual-bell off
    set -g visual-silence off

# ============
# Key Bindings
# ============
  # ------
  # Prefix
  # ------
    set-option -g prefix C-b
  # --------
  # VIM mode
  # --------
    set-window-option -g mode-keys vi
    set -g status-keys vi
    bind-key -T copy-mode-vi v send -X begin-selection
    bind-key -T copy-mode-vi V send -X select-line
    bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel 'xclip -in -selection clipboard'
  # ----------
  # Navigation
  # ----------
    # Select window
    bind-key -n M-1 select-window -t 1
    bind-key -n M-2 select-window -t 2
    bind-key -n M-3 select-window -t 3
    bind-key -n M-4 select-window -t 4
    bind-key -n M-5 select-window -t 5
    bind-key -n M-6 select-window -t 6
    bind-key -n M-7 select-window -t 7
    bind-key -n M-8 select-window -t 8
    bind-key -n M-9 select-window -t 9
    bind-key -n M-0 select-window -t 0
  # ------
  # Splits
  # ------
    # Horizontal split
    bind \" split-window -h -c "#{pane_current_path}"
    bind = split-window -h -c "#{pane_current_path}"
    # Vertical split
    bind - split-window -v -c "#{pane_current_path}"
    bind % split-window -v -c "#{pane_current_path}"
  # ----
  # Windows
  # ----
    bind c new-window -c "#{pane_current_path}"
    bind x kill-pane
  # --------
  # Resizing
  # --------
    bind -n 'M-h' if-shell "$is_vim" 'send-keys M-h' 'resize-pane -L 1'
    bind -n 'M-j' if-shell "$is_vim" 'send-keys M-j' 'resize-pane -D 1'
    bind -n 'M-k' if-shell "$is_vim" 'send-keys M-k' 'resize-pane -U 1'
    bind -n 'M-l' if-shell "$is_vim" 'send-keys M-l' 'resize-pane -R 1'
  # -------------
  # Miscellaneous
  # -------------
    # Reload configuration
    bind-key r source-file ~/.config/tmux/tmux.conf \; display-message "Configuration reloaded"

# =======
# Plugins
# =======
  set -g @plugin 'tmux-plugins/tpm'
  set -g @plugin 'tmux-plugins/tmux-sensible'
  set -g @plugin 'nhdaly/tmux-better-mouse-mode'
  set -g @plugin 'tmux-plugins/tmux-yank'
  set -g @plugin 'tmux-plugins/tmux-resurrect'
  set -g @plugin 'tmux-plugins/tmux-continuum'
  set -g @plugin 'catppuccin/tmux'

# ====================
# Plugin configuration
# ====================
  # --------------
  # tmux-continuum
  # --------------
    set -g @continuum-restore 'on'

# ============
# Finalization
# ============
  # ------------------
  # TPM Initialization
  # ------------------
    set-environment -g PATH "/opt/homebrew/bin:/usr/local/bin:/bin:/usr/bin"
    run '~/.tmux/plugins/tpm/tpm'
